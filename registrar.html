<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      body {
        left: 0px;
      	top: 0px;
      	width: 100%;
      	height: 100%;
        background-color: #000000
        color: white
      }
      select, input {
        margin: 2vh;
      }
    </style>
  </head>
  <body>
    <form class="contenedor" action="/registrar" method="post" id='formulario'>
      <input type="number" name='documento' id="documento" placeholder="Documento del cliente" autofocus> <img id='alert1' src="alert" alt="Alert" style="width:16px;height:16px;"><br>
      <input type="date" name='nacimiento' id="nacimiento"> <img id='alert2' src="alert" alt="Alert" style="width:16px;height:16px;"><br>
      <select name='sexo' id='sexo'>
        <option value="m">Masculino</option>
        <option value="f">Femenino</option>
        <option value="o">Otro</option>
      </select> <img id='alert3' src="alert" alt="Alert" style="width:16px;height:16px;"><br>
      <input type="text" name="localidad" id="localidad" placeholder="Localidad"> <img id='alert4' src="alert" alt="Alert" style="width:16px;height:16px;"><br>
      <input type="text" name="tarjeta" id="tarjeta" placeholder="Pase tarjeta para completar"> <img id='alert5' src="alert" alt="Alert" style="width:16px;height:16px;"><br>
      <input type="button" id='cargar' value="Cargar">
    </form>
  </body>
</html>

<script
  src="/jquery-3.4.1.min.js"></script>

<script src="http://localhost:4000/socket.io/socket.io.js"></script>

<script type="text/javascript">
  document.getElementById('cargar').addEventListener("click", function() {
    if (validateForm()) {
      document.getElementById('formulario').submit();
    } else {
      alert("Revisar campos")
    }

  });
  function validateForm() {
    if ($('#documento').val().length < 7  || $('#nacimiento').val() == '' || !$('sexo').val() == '' || !$('localidad').val() == '') {
      return(false);
    } else {
      return(true);
    }
  }

  jQuery(function($){
    var socket = io.connect('http://localhost:4000');
    socket.on('rfid', function(rfidtag) {
      $('#tarjeta').val(rfidtag);
    })
  });
</script>
